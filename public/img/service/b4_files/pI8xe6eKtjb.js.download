;/*FB_PKG_DELIM*/

__d("WAMapsShallowEqual",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c;if(a.size!==b.size)return!1;for(a of a){var d=a[0],e=a[1];c=b.get(d);if(c!==e||c===void 0&&!b.has(d))return!1}return!0}f["default"]=a}),66);
__d("WAWebBubbleIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="bubble";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=24;o=24;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 24 24",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 24 24",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{fill:"currentColor",d:"M19.2,4H4.8C3.8,4,3,4.8,3,5.8V22l3.6-3.6h12.6c1,0,1.8-0.8,1.8-1.8V5.8C21,4.8,20.2,4,19.2,4z M19.2,16.6 H6.6l-1.8,1.8V5.8h14.4V16.6z"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.BubbleIcon=a}),98);
__d("WAWebFirstPartyStickerInfo.react",["fbt","WAWebButton.react","WAWebCmd","WAWebFavoriteStickerAction","WAWebFavoriteStickerCollection","WAWebFlex.react","WAWebMiscGatingUtils","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerPackCollectionMd","react","useWAWebEventTargetValue"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useEffect,m=150;function a(a){var b=a.stickerPackId,c=a.onStickerPackView,e=a.stickerPackViewDelay,f=a.sticker;a=a.showViewPackButton;var g=n(b),i;if(b){var j=function(a){a.stopPropagation(),c&&c(),e!=null?self.setTimeout(function(){return d("WAWebCmd").Cmd.openStickerPack(b)},e+m):d("WAWebCmd").Cmd.openStickerPack(b)};d("WAWebMiscGatingUtils").isFavoriteStickersEnabled()?f!=null&&(i=k.jsxs(d("WAWebFlex.react").FlexRow,{children:[a&&k.jsx(d("WAWebButton.react").Button,{onClick:j,type:"secondary",children:h._(/*BTDS*/"View Pack")}),d("WAWebFavoriteStickerCollection").FavoriteStickerCollection.get(f.filehash)?k.jsx(d("WAWebButton.react").Button,{onClick:function(){return d("WAWebFavoriteStickerAction").removeStickerFromFavorites(f)},type:"secondary",children:h._(/*BTDS*/"Remove From Favorites")}):k.jsx(d("WAWebButton.react").Button,{onClick:function(){return d("WAWebFavoriteStickerAction").addStickerToFavorites(f)},type:"secondary",children:h._(/*BTDS*/"Add to Favorites")})]})):i=a?k.jsx(d("WAWebButton.react").Button,{onClick:j,type:"secondary",children:h._(/*BTDS*/"View Pack")}):null}return k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:g==null?void 0:g.name,publisher:g==null?void 0:g.publisher,theme:d("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer}),i]})}a.displayName=a.name+" [from "+f.id+"]";function n(a){l(function(){a&&d("WAWebStickerPackCollectionMd").StickerPackCollectionMd.fetchStickerPack(a)},[a]);var b=c("useWAWebEventTargetValue")(d("WAWebStickerPackCollectionMd").StickerPackCollectionMd,"add remove reset",function(){return a!=null?d("WAWebStickerPackCollectionMd").StickerPackCollectionMd.get(a):null});return b}g["default"]=a}),226);
__d("WAWebKeepInChatMediaIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="keep-in-chat-media";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=24;o=24;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 24 24",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),fill:"none",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{d:"m17 3h-10c-1.1 0-1.99.9-1.99 2l-.01 16 7-3 7 3v-16c0-1.1-.9-2-2-2z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.KeepInChatMediaIcon=a}),98);
__d("WAWebMediaAudio.react",["fbt","WAWebMediaUrlProvider","WAWebPttAudioTag.react","WAWebUIRefreshGatingUtils","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(a){a.stopPropagation()};function l(a){var b=a.msg;a=a.url;var c=d("WAWebUIRefreshGatingUtils").checkIfShouldBeEnabledInWindowsEnv()?h._(/*BTDS*/"Audio playback is not supported on this device."):h._(/*BTDS*/"Your browser doesn't support audio playback.");return j.jsx(d("WAWebPttAudioTag.react").AudioTag,{url:a,className:"xh8yej3 xqolr7f x1anomrk",onClick:k,autoPlay:!0,msg:b,controls:!0,testId:"media-audio",children:c})}l.displayName=l.name+" [from "+f.id+"]";function m(){return j.jsx("div",babelHelpers["extends"]({className:"xzkaem6 xdzyupr x1vd4hg5 xx5krr6 xztyhrg x18d0r48"},{onClick:k}))}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=a.mediaData,e=a.msg;a=d("useWAWebModelValues").useModelValues(b,["mediaStage","renderableUrl"]);return j.jsx(c("WAWebMediaUrlProvider"),{mediaData:a,placeholderRenderer:m,children:function(a){return j.jsx(l,{url:a,msg:e})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebMediaViewerFlow.react",["Keys","Promise","WALogger","WANullthrows","WAWebAllMediaCollection","WAWebCarouselMsgUtils","WAWebChatMedia","WAWebFrontendConstants","WAWebFrontendMsgGetters","WAWebL10N","WAWebMediaIncrementalZoom","WAWebMediaTypes","WAWebMediaViewerModal.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebMsgGetters","WAWebMsgType","WAWebSuspendedGroupUtils","WAWebThumbList.react","WAWebUiActionWamEvent","WAWebVelocityAnimate","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamMsgUtils","WAWebWamPrivateStatsUtils","asyncToGeneratorRuntime","react","useLazyRef","useWAWebForceUpdate","useWAWebListener","useWAWebPrevious","useWAWebStableCallback","useWAWebThrottledCallback","useWAWebUiIdle","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i,j,k,l;e=l||d("react");var m=k||(k=c("react")),n=e.useEffect,o=e.useRef,p=e.useState,q=m.createContext(!1),r={duration:300,delay:100,easing:[.1,.82,.25,1]},s=function(a){a=a.direction;var b=[1,0],c=["0%","100%"];a==="down"&&(b.reverse(),c.reverse());return{opacity:b,translateY:c}},t=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.el;a=a.direction;if(!b)return;return c("WAWebVelocityAnimate")(b,s({direction:a}),r)});return function(b){return a.apply(this,arguments)}}();function a(a){var e,f=a.msg,g=a.highlightedMsgIds,k=a.shouldShowAllMedia,l=c("useWAWebUnmountSignal")(),r=c("useWAWebUiIdle")(),s=d("useWAWebForceUpdate").useForceUpdateDONOTUSE(),v=d("WAWebFrontendMsgGetters").getChat(f);e=Boolean((e=v.groupMetadata)==null?void 0:e.isLidAddressingMode);var w=d("WAWebWamMsgUtils").msgIsLid(f,v.id,e),x=c("useLazyRef")(function(){return f.type===d("WAWebMsgType").MSG_TYPE.IMAGE?new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.IMAGE_OPEN,uiActionPreloaded:f.mediaData.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED,isLid:w}):null}),y=c("useLazyRef")(function(){var a=f;if(f.isCarouselCard){var b;a=(b=d("WAWebCarouselMsgUtils").getParentMsgFromCarouselCard(f))!=null?b:f}return d("WAWebChatMedia").constructMediaMsgs(d("WAWebFrontendMsgGetters").getChat(a),a)}),z=k===!0?d("WAWebAllMediaCollection").AllMediaCollection:null,A=y.current.length,B=c("useWAWebPrevious")(A),C=o(null),D=o(),E=o(),F=o(null),G=o(null),H=o(null);v=p(f);var I=v[0],J=v[1];e=p(!1);var K=e[0],L=e[1];k=p(u(I));v=k[0];var M=k[1],N=c("useWAWebPrevious")(I),O=function(a){a===void 0&&(a=!1);var b=G.current,d=H.current,e=F.current;if(!b||!d||!e)return;var f=0;e instanceof HTMLElement&&(f=e.clientWidth/2-b.clientWidth/2);c("WAWebVelocityAnimate")(d,"stop");b=0;a&&(b=300);c("WAWebVelocityAnimate")(e,"scroll",{duration:b,container:d,offset:f,axis:"x",easing:[.1,.82,.25,1]})};n(function(){var a=function(a){if(!a)return;c("WAWebVelocityAnimate")(a,{opacity:[1,0],translateY:["0%","100%"]},{duration:300,delay:100,easing:[.1,.82,.25,1]}).then(function(){if(l.aborted)return;M(!1)})};O();u(f)&&a(G.current)},[]);n(function(){A>(B!=null?B:0)&&O()},void 0);var P=function(a){r(function(){y.current.loadMoreAroundIfNeeded(a)}),J(a)};e=function(){var a=-1;if(!g||!I)return a;var b=I.id.toString();if(!g.has(b))return a;var c=0;g.forEach(function(d){d===b&&(a=c),c++});return a};var Q=function(b){var a=z!=null?z:y.current;b&&b.stopPropagation();if(K)return;b=I;if(!b)return;a=a.getAfter(b);if(a){P(a);return}if(!y.current.hasMediaAfter)return;if(D.current)return;D.current=y.current.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(f),msg:f,direction:"after"}).then(function(a){if(l.aborted)return;typeof a.length==="number"&&a.length>0&&I===f&&Q()})["catch"](function(a){d("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]))).devConsole(a)})["finally"](function(){D.current=null})},R=function(b){var a=z!=null?z:y.current;b&&b.stopPropagation();if(K)return;b=I;if(!b)return;a=a.getBefore(b);if(a){P(a);return}if(!y.current.hasMediaBefore)return;if(E.current)return;E.current=y.current.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(f),msg:f,direction:"before"}).then(function(a){if(l.aborted)return;typeof a.length==="number"&&a.length>0&&I===f&&R()})["catch"](function(a){d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["query media msgs error: "]))).devConsole(a)})["finally"](function(){E.current=null})};k=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.defaultPrevented)return;if(I&&!u(I))return;var e=(yield new(j||(j=b("Promise")))(function(a){d("WAWebModalManager").ModalManager.exists(a)}));if(e&&z==null)return;e=c("WAWebL10N").isRTL();a.keyCode===c("Keys").LEFT?e?Q():R():a.keyCode===c("Keys").RIGHT&&(e?R():Q())});return function(b){return a.apply(this,arguments)}}();var S=null;f.type===d("WAWebMsgType").MSG_TYPE.IMAGE&&(S=function(){var a=x.current;if(a){var b;Object.assign(a,d("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid((b=d("WAWebFrontendMsgGetters").getChat(f))==null?void 0:b.id));a.markUiActionT();a.commit();x.current=null}d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});var T=function(a){L(a)},U=function(){d("WAWebModalManager").ModalManager.closeMedia()},V=function(){var a=function(a){if(!a)return;c("WAWebVelocityAnimate")(a,{opacity:[0,1],translateY:["100%","0%"]},{duration:300,easing:[.1,.82,.25,1]})};u(f)&&a(G.current)},W=function(){u(f)&&void t({el:G.current,direction:"up"})},X=function(){u(f)&&void t({el:G.current,direction:"down"})},Y=c("useWAWebStableCallback")(function(){J(null),U()});d("useWAWebListener").useListener(u(I)?null:I,"revoked",Y);Y=u(I)?y.current:null;d("useWAWebListener").useListener(Y,"remove",function(a,b,d){b=y.current;var e=I;if(b.includes(a)||e!=null&&e.id!=null&&e.id.toString()!==a.id.toString()){s();return}e=d.index;b.length===0?U():b.length===e?P(c("WANullthrows")(b.at(e-1))):P(c("WANullthrows")(b.at(e)))});d("useWAWebListener").useListener(Y,"reset",function(){U()});d("useWAWebListener").useListener(Y,"query_media_after",function(){s()});d("useWAWebListener").useListener(Y,"query_media_before",function(){var a=H.current;if(!a)return;C.current=a.scrollWidth;a instanceof HTMLElement&&s()});d("useWAWebListener").useListener(window,"keydown",k);n(function(){r(function(){if(!I)return;y.current.loadMoreAroundIfNeeded(I)})},[I,y,r]);n(function(){if(N!==I)O(!0);else{var a=H.current;if(!a||C.current==null||C.current===0)return;a instanceof HTMLElement&&(a.scrollLeft+=a.scrollWidth-C.current);C.current=null}},[I,N]);Y=function(a,b,e){if(b.length===0)return;if(e==null)return;if(b.hasMediaBefore&&e<a.clientWidth){var f=c("WANullthrows")(b.head());r(function(){b.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(f),msg:f}),s()})}if(b.hasMediaAfter&&e+d("WAWebFrontendConstants").SCROLL_FUDGE>a.scrollWidth-2*a.clientWidth){var g=c("WANullthrows")(b.last());r(function(){b.queryMedia({chat:d("WAWebFrontendMsgGetters").getChat(g),msg:g,direction:"after"}),s()})}};var aa=c("useWAWebThrottledCallback")(Y,100);k=function(a){aa(a.currentTarget,y.current,a.currentTarget.scrollLeft)};if(!I)return null;if(d("WAWebFrontendMsgGetters").getChat(f).isSuspendedOrTerminated()&&d("WAWebMiscGatingUtils").isGroupSuspendV2Enabled()){d("WAWebSuspendedGroupUtils").openSuspendedGroupMediaDownloadFailureModal();return}Y=y.current;var Z=z!=null?z:y.current,$=Z.last();$=Y.hasMediaAfter||I!==$?Q:null;Z=Z.head();Y=Y.hasMediaBefore||I!==Z?R:null;return m.jsx(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtxProvider,{activeMsg:I,children:m.jsx(q.Provider,{value:K,children:m.jsxs("div",{className:K?"img-zoomed-in":null,children:[m.jsx(c("WAWebMediaViewerModal.react"),{msg:I,mediaData:I.mediaData,onBack:U,onExitAnimation:V,onNext:$,onPrev:Y,onImgZoomIn:T,getZoomNode:a.getZoomNode,startTime:a.startTime,isAnimatingThumbs:v,onImageLoad:S,msgIndexInAlbum:e(),albumSize:((Z=a.highlightedMsgIds)==null?void 0:Z.size)||0,shouldShowNumberText:(V=a.shouldShowNumberText)!=null?V:!1}),d("WAWebMsgGetters").getHasThumbList(I)&&m.jsx(c("WAWebThumbList.react"),{activeMsg:I,mediaMsgs:z!=null?z:y.current,highlightedMsgIds:a.highlightedMsgIds,onSelectThumb:P,onSetActiveThumb:function(a){F.current=a},onScroll:k,setRefThumbsContainer:function(a){G.current=a},setRefThumbs:function(a){H.current=a},moveUpAnimation:W,moveDownAnimation:X})]})})})}a.displayName=a.name+" [from "+f.id+"]";function u(a){return!a?!0:d("WAWebMsgGetters").getHasThumbList(a)}g.MediaViewerFlowZoomContext=q;g.MediaViewerFlow=a}),98);
__d("WAWebMediaViewerReportSpamPopupLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","WAWebLoadingDrawer.react","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||c("react");a=c("WAWebLazyLoadedRetriable")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("JSResourceForInteraction")("WAWebMediaViewerReportSpamPopup.react").__setRef("WAWebMediaViewerReportSpamPopupLoadable").load());return a}),"WAWebMediaViewerReportSpamPopup");d=c("WAWebLoadable")({loader:a,loading:function(a){return i.jsx(c("WAWebLoadingDrawer.react"),{error:Boolean(a.error)})}});g.WAWebMediaViewerReportSpamPopupLoadable=d}),98);
__d("WAWebReactionsMediaIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="reactions-media";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=15;o=15;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 15 15",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),fill:"none",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 7.5C0 11.6305 3.36946 15 7.5 15C11.6527 15 15 11.6305 15 7.5C15 3.36946 11.6305 0 7.5 0C3.36946 0 0 3.36946 0 7.5ZM10.995 8.69333C11.1128 8.67863 11.2219 8.66503 11.3211 8.65309C11.61 8.63028 11.8076 8.91918 11.6784 9.13965C10.8573 10.6374 9.29116 11.793 7.50455 11.793C5.71794 11.793 4.15181 10.6602 3.33072 9.16246C3.18628 8.91918 3.37634 8.63028 3.66524 8.65309C3.79123 8.66749 3.93521 8.68511 4.09426 8.70457C4.94292 8.80842 6.22074 8.96479 7.48174 8.96479C8.81855 8.96479 10.1378 8.80025 10.995 8.69333ZM5.41405 7.37207C6.05761 7.37207 6.60923 6.72851 6.60923 6.02978C6.60923 5.30348 6.05761 4.6875 5.41405 4.6875C4.77048 4.6875 4.21886 5.33106 4.21886 6.02978C4.20967 6.75609 4.77048 7.37207 5.41405 7.37207ZM10.7807 6.05619C10.7807 6.74114 10.24 7.37201 9.60912 7.37201C8.97825 7.37201 8.4375 6.76818 8.4375 6.05619C8.4375 5.37124 8.97825 4.74037 9.60912 4.74037C10.24 4.74037 10.7807 5.34421 10.7807 6.05619Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.ReactionsMediaIcon=a}),98);
__d("WAWebReportNewsletterPostSpamButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportNewsletterPostPopup.react","WAWebSpamConstants","WAWebThumbsDownRefreshedIcon.react","WAWebUIRefreshGatingUtils","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.msg,e=d("WAWebFrontendMsgGetters").getChat(b);a=function(){d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebReportNewsletterPostPopup.react"),{chat:e,msg:b,spamFlow:d("WAWebSpamConstants").SpamFlow.MediaViewer}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?j.jsx(d("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}):null,children:h._(/*BTDS*/"Report")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebSearchTheWebButton.react",["WAWebDropdownItem.react","WAWebModalManager","WAWebSearchRefreshedIcon.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebUIRefreshGatingUtils","WAWebWamEnumStwInteraction","WAWebWebSearchPopup.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.msg,e=a.entryPoint,f=a.stwFormat,g=a.messageType;a=function(){d("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:e,stwFormat:f,stwInteraction:d("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_CLICKED,messageType:g}),d("WAWebModalManager").ModalManager.open(i.jsx(c("WAWebWebSearchPopup.react"),{message:b,entryPoint:e,stwFormat:f}))};return i.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?i.jsx(d("WAWebSearchRefreshedIcon.react").SearchRefreshedIcon,{}):null,children:d("WAWebSearchTheWebCommonUtils").getHFMHeaderCTAText()})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebSendForAdminReviewButton.react",["fbt","WAWebDropdownItem.react","WAWebFrontendMsgGetters","WAWebModalManager","WAWebReportToAdminEventsLogger","WAWebReportToAdminPopup.react","WAWebThumbsDownRefreshedIcon.react","WAWebUIRefreshGatingUtils","WAWebWamEnumReportToAdminInteraction","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.msg;a=function(){d("WAWebReportToAdminEventsLogger").logRTAReportingEvent({reportToAdminInteraction:d("WAWebWamEnumReportToAdminInteraction").REPORT_TO_ADMIN_INTERACTION.CLICK_SEND_FOR_ADMIN_REVIEW,groupId:d("WAWebFrontendMsgGetters").getChat(b).id.user}),d("WAWebModalManager").ModalManager.open(j.jsx(c("WAWebReportToAdminPopup.react"),{msg:b}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?j.jsx(d("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}):null,children:h._(/*BTDS*/"Send for admin review")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebUndoKeepInChatMediaIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="undo-keep-in-chat-media";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=24;o=25;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 25 24",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),fill:"none",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{clipRule:"evenodd",d:"m18 3h-10.00003c-1.1 0-1.99.9-1.99 2l-.0005.79529 13.99053 8.04121v-8.8365c0-1.1-.9-2-2-2zm2 14.9115 3.8749 2.2272.9967-1.734-22.97977-13.20787-.996627 1.73399 5.111727 2.93802-.00696 11.13116 7.00003-3 7 3z",fill:"currentColor",fillRule:"evenodd"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.UndoKeepInChatMediaIcon=a}),98);
__d("WAWebUnpinnedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="unpinned";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=24;o=24;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 24 24",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),fill:"none",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{d:"M15.9984 10.6491V4.28906H16.9984V2.28906H7.64844L15.9984 10.6491Z",fill:"currentColor"}),k.jsx("path",{d:"M16 11.7291V4.28906H17V2.28906H7V2.71906L16 11.7291Z",fill:"currentColor"}),k.jsx("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"}),k.jsx("path",{d:"M21.21 19.7395L4.23 2.73945C4.03 2.53945 3.79 2.43945 3.52 2.43945C3.25 2.43945 3.01 2.53945 2.81 2.73945C2.61 2.93945 2.51 3.17945 2.5 3.44945C2.5 3.71945 2.59 3.95945 2.79 4.15945L8.01 9.36945V11.2795L6.00999 13.2795V15.2795H11.01V21.2795L12.01 22.2795L13.01 21.2795V15.2795H13.93L19.79 21.1295C19.99 21.3295 20.23 21.4295 20.5 21.4295C20.77 21.4295 21.01 21.3295 21.21 21.1295C21.41 20.9295 21.51 20.6995 21.51 20.4295C21.51 20.1595 21.41 19.9295 21.21 19.7295V19.7395Z",fill:"currentColor"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.UnpinnedIcon=a}),98);
__d("WAWebMediaPanelHeader.react",["fbt","$InternalEnum","WALogger","WAPromiseDelays","WAWebArrowForwardRefreshedIcon","WAWebBubbleIcon.react","WAWebCellFrame.react","WAWebChatGetters","WAWebChatMessageSearch","WAWebClock","WAWebCloseRefreshedIcon.react","WAWebCmd","WAWebColumnChangeDispatch","WAWebCommentsModal.react","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebCopyToClipboard","WAWebDebugGatingUtils","WAWebDeleteIcon.react","WAWebDeleteRefreshedIcon.react","WAWebDeleteRevokeMsgFlow.react","WAWebDetailImage.react","WAWebDevOnlyBadge.react","WAWebDownloadIcon.react","WAWebDownloadRefreshedIcon.react","WAWebDrawerManager","WAWebDropdown.react","WAWebDropdownItem.react","WAWebDropdownItemSeparator.react","WAWebEmojiRefreshedIcon.react","WAWebEmojiText.react","WAWebEnvironment","WAWebFbtCommon","WAWebFileSaver","WAWebFlex.react","WAWebForwardIcon.react","WAWebForwardMessageModalLoadable","WAWebForwardRefreshedIcon.react","WAWebFrontendChatGetters","WAWebFrontendMsgGetters","WAWebInfoRefreshedIcon.react","WAWebKeepInChatActions","WAWebKeepInChatMediaIcon.react","WAWebKeepRefreshedIcon.react","WAWebLaunchIcon.react","WAWebMediaDocumentUtils","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.styles","WAWebMediaTypes","WAWebMediaViewerConstants","WAWebMediaViewerFlow.react","WAWebMediaViewerReportSpamPopupLoadable","WAWebMenuBar.react","WAWebMenuIcon.react","WAWebMessageAssociation.flow","WAWebMessageMeta.react","WAWebModalManager","WAWebMoreRefreshedIcon.react","WAWebMsgActionCapability","WAWebMsgGetters","WAWebMsgReply","WAWebMsgType","WAWebMsgViewCount","WAWebNewsletterGatingUtils","WAWebPinInChatCollection","WAWebPinMessageModal.react","WAWebPinRefreshedIcon.react","WAWebPinned3Icon.react","WAWebPinnedMessagesUserJourneyLogger","WAWebProtobufsE2E.pb","WAWebReactionsMediaIcon.react","WAWebReactionsPanel.react","WAWebReactionsUtils","WAWebReplyIcon.react","WAWebReplyPrivatelyRefreshedIcon.react","WAWebReplyRefreshedIcon.react","WAWebReplyToMsgChatAction","WAWebReportGatingUtils","WAWebReportNewsletterPostSpamButton.react","WAWebRevokeMetricUtils","WAWebSearchTheWebButton.react","WAWebSearchTheWebCommonUtils","WAWebSearchTheWebEventLogger","WAWebSendForAdminReviewButton.react","WAWebSendPinMessageAction","WAWebSendReactionMsgAction","WAWebSendReactionsTray.react","WAWebSendReactionsTrayContainer.react","WAWebSendSpamChatAction","WAWebSpamConstants","WAWebStarBtnIcon.react","WAWebStarRefreshedIcon.react","WAWebStateUtils","WAWebThumbsDownRefreshedIcon.react","WAWebUIRefreshGatingUtils","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUndoKeepInChatMediaIcon.react","WAWebUnkeepRefreshedIcon.react","WAWebUnpinRefreshedIcon.react","WAWebUnpinnedIcon.react","WAWebUnstarBtnIcon.react","WAWebUnstarRefreshedIcon.react","WAWebViewOnceIcon.react","WAWebWamEnumKicEntryPointType","WAWebWamEnumStwEntryPoint","WAWebWamEnumStwInteraction","WAWebXViewerIcon.react","cr:7565","react","requireDeferred","stylex","useWAWebIsPinnedMsg","useWAWebListener","useWAWebModelValues","useWAWebMsgValues","useWAWebStableCallback"],(function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q;e=q||d("react");var r=o||(o=c("react")),s=e.useContext,t=e.useRef,u=e.useState,v=c("requireDeferred")("WAWebAusOSAReportModalTrigger").__setRef("WAWebMediaPanelHeader.react"),w=b("$InternalEnum").Mirrored(["MenuBar","Dropdown"]);function x(a){var b=d("WAWebFrontendMsgGetters").getChat(a);d("WAWebFrontendChatGetters").getIsCAG(b)?d("WAWebModalManager").ModalManager.open(r.jsx(c("WAWebCommentsModal.react"),{parentMsgs:[a]})):(b.composeQuotedMsg=a,d("WAWebComposeBoxActions").ComposeBoxActions.focus(b))}function y(a){return h._(/*BTDS*/"Report {contact_name}",[h._param("contact_name",a.displayName())])}y.displayName=y.name+" [from "+f.id+"]";function a(a){var b,e,f=a.msg,g=a.onHightlightCloseEnd,h=a.msgIndexInAlbum,k=a.onViewOnceInfoClick,l=a.onClose,m=t(null),n=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled();e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,e.getType,e.getIsGif,e.getIsViewOnce,e.getSender,d("WAWebFrontendMsgGetters").getSenderObj,e.getT,e.getIsSentByMe,e.getIsStickerMsg,e.getBroadcastId,d("WAWebFrontendMsgGetters").getIsUnsentMedia,e.getIsKept,e.getMessageSecret,e.getIsCarouselCard]);e[0];e[1];e[2];e[3];var o=e[4],q=e[5];e[6];var v=e[7];e[8];e[9];e[10];e[11];e[12];e[13];e[14];e=d("WAWebMsgViewCount").useWAWebLocalizedViewCount(f.id);var w=d("WAWebFrontendMsgGetters").getChat(f),x=d("useWAWebModelValues").useModelValues(a.mediaData,["filehash","mediaStage","renderableUrl"]),y=u(null),z=y[0],A=y[1];y=u(null);var B=y[0],C=y[1],D=t(null),E=function(){A(null)},F=function(){C(null)},G=c("useWAWebStableCallback")(function(a){if(!d("WAWebReactionsUtils").canReactToMessage(a))return;var b=function(b){d("WAWebSendReactionMsgAction").sendReactionToMsg(a,b)["catch"](function(a){d("WALogger").DEV(i||(i=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg picker: error ",""])),a)}),F()};C({dirY:d("WAWebDropdown.react").DirY.BOTTOM,dirX:d("WAWebDropdown.react").DirX.CENTER,type:d("WAWebDropdown.react").MenuType.ReactionPicker,menu:r.jsx(d("WAWebReactionsPanel.react").ReactionsPanel,{msgId:a.id.toString(),onSelection:b}),flipOnRTL:!0,anchor:D.current})});y=function(){if(!d("WAWebReactionsUtils").canReactToMessage(f))return;var a=function(a){a!==d("WAWebSendReactionsTray.react").MORE_REACTIONS?d("WAWebSendReactionMsgAction").sendReactionToMsg(f,a)["catch"](function(a){d("WALogger").DEV(j||(j=babelHelpers.taggedTemplateLiteralLoose(["sendReactionMsg: error sending from media modal ",""])),a)}):self.setTimeout(function(){G(f)},150),E()};a={dirY:d("WAWebDropdown.react").DirY.BOTTOM,dirX:d("WAWebDropdown.react").DirX.CENTER,type:d("WAWebDropdown.react").MenuType.ReactionSendTray,menu:r.jsx(d("WAWebSendReactionsTrayContainer.react").SendReactionsTrayContainer,{msg:f,selectedCallback:a}),flipOnRTL:!1,anchor:D.current};A(a)};d("useWAWebListener").useListener(m.current,"animationend",function(){g()});var H=f.displayName({showShortName:!0,withPushName:!0}),I=function(){if(o)return!1;return!d("WAWebMsgActionCapability").canDownloadMsg(f)?!1:!!x.renderableUrl||x.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED};n=n?r.jsx(d("WAWebCloseRefreshedIcon.react").CloseRefreshedIcon,{xstyle:a.isHighlightClose?c("WAWebMediaPanelHeader.styles").highlightClose:{},containerRef:m}):r.jsx(d("WAWebXViewerIcon.react").XViewerIcon,{xstyle:a.isHighlightClose?c("WAWebMediaPanelHeader.styles").highlightClose:{},containerRef:m});var J;z?J=r.jsx(d("WAWebUimUie.react").UIE,{displayName:"MsgReaction",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:E,children:r.jsx(c("WAWebUimUieMenu.react"),{contextMenu:z})}):B&&(J=r.jsx(d("WAWebUimUie.react").UIE,{displayName:"MsgReactionPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:F,children:r.jsx(c("WAWebUimUieMenu.react"),{contextMenu:B})}));m=d("WAWebNewsletterGatingUtils").isNewsletterViewCountEnabled(w==null||(b=w.newsletterMetadata)==null?void 0:b.membershipType)&&e!=null?r.jsxs(d("WAWebFlex.react").FlexRow,{className:(p||(p=c("stylex")))(c("WAWebMediaPanelHeader.styles").viewCount),children:[d("WAWebClock").Clock.relativeDateAndTimeStr(v),r.jsx(d("WAWebMessageMeta.react").MetaBullet,{}),r.jsx("span",{children:e})]}):r.jsx(r.Fragment,{children:d("WAWebClock").Clock.relativeDateAndTimeStr(v)});z=s(d("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext);B=s(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isEnabled;w=!B&&z;return r.jsxs("div",babelHelpers["extends"]({},(p||(p=c("stylex"))).props([c("WAWebMediaPanelHeader.styles").mediaPanelHeader,w&&c("WAWebMediaPanelHeader.styles").mediaPanelHeaderHidden]),{children:[r.jsx("div",babelHelpers["extends"]({},p.props(c("WAWebMediaPanelHeader.styles").info),{children:r.jsx(c("WAWebCellFrame.react"),{idle:!0,image:r.jsx(d("WAWebDetailImage.react").DetailImage,{id:q,size:40}),primary:r.jsx(d("WAWebEmojiText.react").EmojiText,{ellipsify:!0,text:H}),secondary:m,theme:"media"})})),r.jsx("div",babelHelpers["extends"]({},p.props(c("WAWebMediaPanelHeader.styles").mediaPanelTools),{children:r.jsxs(d("WAWebMenuBar.react").MenuBar,{theme:"strong",children:[r.jsx(P,{isMediaDownloadable:I,msg:f,msgIndexInAlbum:h,onClose:l,onViewOnceInfoClick:k,openReactionTray:y,sendReactionButtonRef:D}),r.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:n,title:c("WAWebFbtCommon")("Close"),onClick:a.onClose})]},"media-panel-header")})),J]}))}a.displayName=a.name+" [from "+f.id+"]";function z(a){var b=a.isMediaDownloadable,c=a.msg,e=a.onClose,f=a.openReactionTray;a=a.sendReactionButtonRef;return r.jsxs(r.Fragment,{children:[d("WAWebMsgReply").canReplyMsg(c)?r.jsx(D,{msg:c,onClose:e}):null,d("WAWebMsgActionCapability").canStarMsg(c)?r.jsx(J,{msg:c}):null,c.canShowKeepOrUnkeepOption()?r.jsx(I,{msg:c}):null,d("WAWebMsgActionCapability").canPinMsg(c)?r.jsx(K,{msg:c}):null,d("WAWebReactionsUtils").canReactToMessage(c)?r.jsx(H,{msg:c,openReactionTray:f,sendReactionButtonRef:a}):null,r.jsx(E,{msg:c,onClose:e}),d("WAWebMsgActionCapability").canForwardMsg(c)?r.jsx(L,{msg:c}):null,r.jsx(Q,{isMediaDownloadable:b,isAlbumMedia:!0,msg:c,onClose:e})]})}z.displayName=z.name+" [from "+f.id+"]";function A(a){var e=a.isMediaDownloadable,f=a.msg,g=a.onClose,h=a.openReactionTray;a=a.sendReactionButtonRef;return r.jsxs(r.Fragment,{children:[!d("WAWebMsgGetters").getIsStickerMsg(f)&&!d("WAWebMsgGetters").getIsCarouselCard(f)?r.jsx(B,{msg:f,type:w.MenuBar,onClose:g}):null,d("WAWebMsgGetters").getIsStickerMsg(f)&&!d("WAWebMsgGetters").getIsCarouselCard(f)&&!d("WAWebMsgGetters").getIsNewsletterMsg(f)?r.jsx(D,{msg:f,onClose:g}):null,d("WAWebMsgActionCapability").canStarMsg(f)?r.jsx(J,{msg:f}):null,d("WAWebMsgActionCapability").canPinMsg(f)?r.jsx(K,{msg:f}):null,f.canShowKeepOrUnkeepOption()?r.jsx(I,{msg:f}):null,d("WAWebMsgGetters").getIsStickerMsg(f)?r.jsx(E,{msg:f,onClose:g}):null,d("WAWebReactionsUtils").canReactToMessage(f)?r.jsx(H,{msg:f,openReactionTray:h,sendReactionButtonRef:a}):null,d("WAWebMsgActionCapability").canForwardMsg(f)?r.jsx(L,{msg:f}):null,d("WAWebMsgGetters").getIsStickerMsg(f)?null:r.jsx(F,{isMediaDownloadable:e,msg:f,type:w.MenuBar}),!d("WAWebMsgGetters").getIsStickerMsg(f)&&c("WAWebEnvironment").isWindows&&b("cr:7565")!=null&&e()?r.jsx(G,{msg:f}):null,d("WAWebMsgActionCapability").canReportMsg(f)?r.jsx(Q,{isMediaDownloadable:e,isAlbumMedia:!1,msg:f,onClose:g}):null]})}A.displayName=A.name+" [from "+f.id+"]";function B(a){var b=a.msg,c=a.onClose;a=a.type;var e=function(a){a.stopPropagation();c();d("WAWebDrawerManager").DrawerManager.existsDrawerRight(function(a){a&&d("WAWebColumnChangeDispatch").Column.column===2&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight()});a=d("WAWebChatMessageSearch").getSearchContext(d("WAWebFrontendMsgGetters").getChat(b),d("WAWebStateUtils").unproxy(b).id);void d("WAWebCmd").Cmd.openChatAt({chat:d("WAWebFrontendMsgGetters").getChat(b),msgContext:a}).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(d("WAWebFrontendMsgGetters").getChat(b))})},f=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled();return a===w.Dropdown?r.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:e,icon:f?r.jsx(d("WAWebArrowForwardRefreshedIcon").ArrowForwardRefreshedIcon,{}):null,children:h._(/*BTDS*/"Go to message")}):r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:f?r.jsx(d("WAWebArrowForwardRefreshedIcon").ArrowForwardRefreshedIcon,{}):r.jsx(d("WAWebBubbleIcon.react").BubbleIcon,{}),title:h._(/*BTDS*/"Go to message"),onClick:e})}B.displayName=B.name+" [from "+f.id+"]";function C(a){var b=a.msg;return r.jsx(d("WAWebDropdownItem.react").DropdownItem,{addSpacing:!0,testid:void 0,action:function(){void d("WAWebCopyToClipboard").copyTextToClipboard(b.id.toString())},children:r.jsx(d("WAWebDevOnlyBadge.react").DevOnlyBadge,{label:"Copy Msg ID"})},"copy-id")}C.displayName=C.name+" [from "+f.id+"]";function D(a){var b=a.msg,c=a.onClose;a=function(a){c(),void d("WAPromiseDelays").delayMs(d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION).then(x.bind(null,d("WAWebStateUtils").unproxy(b)))};return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebReplyRefreshedIcon.react").ReplyRefreshedIcon,{}):r.jsx(d("WAWebReplyIcon.react").ReplyIcon,{}),title:h._(/*BTDS*/"Reply"),onClick:a})}D.displayName=D.name+" [from "+f.id+"]";function E(a){var b=a.msg,e=a.onClose;a=function(a){d("WAWebModalManager").ModalManager.open(r.jsx(c("WAWebDeleteRevokeMsgFlow.react"),{chat:d("WAWebFrontendMsgGetters").getChat(b),msgList:[d("WAWebStateUtils").unproxy(b)],onDelete:e})),d("WAWebRevokeMetricUtils").UiRevokeActionHelper.startSession(),d("WAWebRevokeMetricUtils").UiRevokeActionHelper.messageSelected()};return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebDeleteRefreshedIcon.react").DeleteRefreshedIcon,{}):r.jsx(d("WAWebDeleteIcon.react").DeleteIcon,{}),title:h._(/*BTDS*/"Delete"),onClick:a})}E.displayName=E.name+" [from "+f.id+"]";function F(a){var b=a.isMediaDownloadable,e=a.msg;a=a.type;var f=function(a){a.stopPropagation(),d("WAWebFileSaver").FileSaver.initDownload(d("WAWebStateUtils").unproxy(e))};if(!b())return null;var g=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled(),i=c("WAWebEnvironment").isWindows?h._(/*BTDS*/"Save as..."):h._(/*BTDS*/"Download");return a===w.Dropdown?r.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:f,disabled:!b(),icon:g?r.jsx(d("WAWebDownloadRefreshedIcon.react").DownloadRefreshedIcon,{}):null,children:i}):r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:g?r.jsx(d("WAWebDownloadRefreshedIcon.react").DownloadRefreshedIcon,{}):r.jsx(d("WAWebDownloadIcon.react").DownloadIcon,{}),title:i,disabled:!b(),onClick:f})}F.displayName=F.name+" [from "+f.id+"]";function G(a){var c=a.msg;a=function(a){a.stopPropagation(),b("cr:7565")==null||b("cr:7565").openMediaFile(c,function(a){d("WAWebMediaDocumentUtils").displayFileOpeningToast(a)})["catch"](function(a){d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Error while opening media file: ",""])),a)})};var e=h._(/*BTDS*/"Open with another app");return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:r.jsx(d("WAWebLaunchIcon.react").LaunchIcon,{}),title:e,onClick:a})}G.displayName=G.name+" [from "+f.id+"]";function H(a){var b=a.msg,c=a.openReactionTray;a=a.sendReactionButtonRef;return b.type===d("WAWebMsgType").MSG_TYPE.STICKER?null:r.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebEmojiRefreshedIcon.react").EmojiRefreshedIcon,{containerRef:a}):r.jsx(d("WAWebReactionsMediaIcon.react").ReactionsMediaIcon,{containerRef:a,width:20}),title:h._(/*BTDS*/"React"),onClick:function(){c()}})}H.displayName=H.name+" [from "+f.id+"]";function I(a){var b=a.msg,c,e;a=d("useWAWebMsgValues").useMsgValues(b.id,[d("WAWebMsgGetters").getIsKept]);a=a[0];var f=function(a){a.stopPropagation(),void d("WAWebKeepInChatActions").runKeepInChatUX(d("WAWebStateUtils").unproxy(b),d("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)},g=function(a){a.stopPropagation(),void d("WAWebKeepInChatActions").runUndoKeepInChatUX(d("WAWebStateUtils").unproxy(b),d("WAWebWamEnumKicEntryPointType").KIC_ENTRY_POINT_TYPE.MEDIA)},i=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled();if(a&&b.canShowUnkeepOption())c=i?r.jsx(d("WAWebUnkeepRefreshedIcon.react").UnkeepRefreshedIcon,{}):r.jsx(d("WAWebUndoKeepInChatMediaIcon.react").UndoKeepInChatMediaIcon,{}),g=g,e=h._(/*BTDS*/"Unkeep");else if(!a&&b.canShowKeepOption())c=i?r.jsx(d("WAWebKeepRefreshedIcon.react").KeepRefreshedIcon,{}):r.jsx(d("WAWebKeepInChatMediaIcon.react").KeepInChatMediaIcon,{}),g=f,e=h._(/*BTDS*/"Keep");else return null;return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:c,title:e,onClick:g},"keep-in-chat-button")}I.displayName=I.name+" [from "+f.id+"]";function J(a){var b=a.msg;a=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled();var c=d("useWAWebMsgValues").useMsgValues(b.id,[d("WAWebMsgGetters").getStar]);c=c[0];var e,f;c?(c=function(a){a.stopPropagation(),d("WAWebCmd").Cmd.sendUnstarMsgs(d("WAWebFrontendMsgGetters").getChat(b),[d("WAWebStateUtils").unproxy(b)])},e=a?r.jsx(d("WAWebUnstarRefreshedIcon.react").UnstarRefreshedIcon,{}):r.jsx(d("WAWebUnstarBtnIcon.react").UnstarBtnIcon,{}),f=h._(/*BTDS*/"_j{\"*\":\"Unstar messages\",\"_1\":\"Unstar message\"}",[h._plural(1)])):(c=function(a){a.stopPropagation(),d("WAWebCmd").Cmd.sendStarMsgs(d("WAWebFrontendMsgGetters").getChat(b),[d("WAWebStateUtils").unproxy(b)])},e=a?r.jsx(d("WAWebStarRefreshedIcon.react").StarRefreshedIcon,{}):r.jsx(d("WAWebStarBtnIcon.react").StarBtnIcon,{}),f=h._(/*BTDS*/"_j{\"*\":\"Star\"}",[h._plural(1)]));return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:e,title:f,onClick:c},"star-button")}J.displayName=J.name+" [from "+f.id+"]";function K(a){var b=a.msg,e,f;a=c("useWAWebIsPinnedMsg")(b.id);var g=d("WAWebFrontendMsgGetters").getChat(b),i=d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled();a?(a=function(a){a.stopPropagation();a=d("WAWebPinInChatCollection").PinInChatCollection.getByParentMsgKey(b.id);new(d("WAWebPinnedMessagesUserJourneyLogger").PinnedMessagesUserJourneyLogger)(g).messageMenuClickUnpin(b,a);d("WAWebSendPinMessageAction").sendPinInChatMsg(b,d("WAWebProtobufsE2E.pb").Message$PinInChatMessage$Type.UNPIN_FOR_ALL)["catch"](function(a){d("WALogger").ERROR(l||(l=babelHelpers.taggedTemplateLiteralLoose(["Error while unpinning a message: ",""])),a)})},e=i?r.jsx(d("WAWebUnpinRefreshedIcon.react").UnpinRefreshedIcon,{}):r.jsx(d("WAWebUnpinnedIcon.react").UnpinnedIcon,{}),f=h._(/*BTDS*/"Unpin")):(a=function(a){a.stopPropagation();a=new(d("WAWebPinnedMessagesUserJourneyLogger").PinnedMessagesUserJourneyLogger)(g);a.messageMenuClickPin(b);d("WAWebModalManager").ModalManager.open(r.jsx(d("WAWebPinMessageModal.react").PinMessageModal,{msg:b,logger:a}))},e=i?r.jsx(d("WAWebPinRefreshedIcon.react").PinRefreshedIcon,{}):r.jsx(d("WAWebPinned3Icon.react").Pinned3Icon,{}),f=h._(/*BTDS*/"Pin"));return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:e,title:f,onClick:a},"pin-button")}K.displayName=K.name+" [from "+f.id+"]";function L(a){var b=a.msg;a=function(a){a.stopPropagation(),d("WAWebFrontendMsgGetters").getIsUnsentMedia(b)?d("WAWebModalManager").ModalManager.open(r.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._(/*BTDS*/"Can't forward"),onOK:function(){return d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._(/*BTDS*/"_j{\"*\":\"Wait until the messages finish sending and displays a checkmark before forwarding.\",\"_1\":\"Wait until the message finishes sending and displays a checkmark before forwarding.\"}",[h._plural(1)])})):d("WAWebModalManager").ModalManager.open(r.jsx(d("WAWebForwardMessageModalLoadable").ForwardMessageModalLoadable,{msgs:[d("WAWebStateUtils").unproxy(b)],onClose:function(){return d("WAWebModalManager").ModalManager.close()}}),{transition:"modal-flow"})};return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebForwardRefreshedIcon.react").ForwardRefreshedIcon,{}):r.jsx(d("WAWebForwardIcon.react").ForwardIcon,{}),title:h._(/*BTDS*/"Forward"),onClick:a})}L.displayName=L.name+" [from "+f.id+"]";function M(a){var b=a.msg;a=function(){void c("WAWebReplyToMsgChatAction")(b)};return r.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebReplyPrivatelyRefreshedIcon.react").ReplyPrivatelyRefreshedIcon,{}):null,children:h._(/*BTDS*/"Reply privately")})}M.displayName=M.name+" [from "+f.id+"]";function N(a){var b=a.msg,c=function(a){!a?d("WAWebSendSpamChatAction").sendMessageReport(b,d("WAWebSpamConstants").SpamFlow.MediaViewer).then(function(a){d("WAWebModalManager").ModalManager.close(),a!=null&&d("WAWebReportGatingUtils").isAusOSAReportingEnabled()&&v.load().then(function(b){return b.WAWebAusOSAReportModalTrigger(a)})["catch"](function(a){d("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error opening Aus OSA modal while reporting a message from media viewer: ",""])),a).sendLogs("report-message-aus-osa-from-media-viewer-error")})})["catch"](function(a){d("WALogger").ERROR(n||(n=babelHelpers.taggedTemplateLiteralLoose(["Error while reporting a message from media viewer: ",""])),a).sendLogs("report-message-from-media-viewer-error")}):void d("WAWebSendSpamChatAction").sendMessageReportBlock(b,d("WAWebSpamConstants").SpamFlow.MediaViewer)};a=function(){var a;d("WAWebModalManager").ModalManager.open(r.jsx(d("WAWebMediaViewerReportSpamPopupLoadable").WAWebMediaViewerReportSpamPopupLoadable,{isBusiness:b.senderObj.isBusiness,isGroup:d("WAWebChatGetters").getIsGroup(d("WAWebFrontendMsgGetters").getChat(b)),isBizBot3p:(a=(a=d("WAWebFrontendMsgGetters").getChat(b).contact.businessProfile)==null?void 0:a.isBizBot3p)!=null?a:!1,onReport:c,onCancel:function(){return d("WAWebModalManager").ModalManager.close()},title:y(b)}))};return r.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebThumbsDownRefreshedIcon.react").ThumbsDownRefreshedIcon,{}):null,children:y(b)})}N.displayName=N.name+" [from "+f.id+"]";function O(a){var b=a.msg,c=a.onClose;a=function(a){c(),void d("WAPromiseDelays").delayMs(d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION+250).then(d("WAWebCmd").Cmd.msgInfoDrawer.bind(d("WAWebCmd").Cmd,d("WAWebStateUtils").unproxy(b)))};return r.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:a,icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebInfoRefreshedIcon.react").InfoRefreshedIcon,{}):null,children:h._(/*BTDS*/"Message info")})}O.displayName=O.name+" [from "+f.id+"]";function P(a){var b=a.isMediaDownloadable,c=a.msg,e=a.msgIndexInAlbum,f=a.onClose,g=a.onViewOnceInfoClick,h=a.openReactionTray;a=a.sendReactionButtonRef;var i=s(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),j=[];i.isEnabled&&j.push(r.jsx(d("WAWebMediaIncrementalZoom").ZoomButton,{direction:"out"}),r.jsx(d("WAWebMediaIncrementalZoom").ZoomButton,{direction:"in"}));c.isViewOnce?j.push(r.jsx(R,{isMediaDownloadable:b,msg:c,onClose:f,onViewOnceInfoClick:g})):e>=0&&c.associationType===d("WAWebMessageAssociation.flow").MessageAssociationType.MEDIA_ALBUM?j.push(r.jsx(z,{isMediaDownloadable:b,msg:c,onClose:f,openReactionTray:h,sendReactionButtonRef:a})):j.push(r.jsx(A,{isMediaDownloadable:b,msg:c,onClose:f,openReactionTray:h,sendReactionButtonRef:a}));return j}P.displayName=P.name+" [from "+f.id+"]";function Q(a){var b=a.isAlbumMedia,e=a.isMediaDownloadable,f=a.msg;a=a.onClose;var g=d("WAWebSearchTheWebCommonUtils").getSupportedSearchOptions(f),i;g.get(d("WAWebSearchTheWebCommonUtils").SearchType.IMAGE)!=null&&(i=d("WAWebSearchTheWebCommonUtils").getSTWFormat(g));g=[];var j=d("WAWebFrontendMsgGetters").getChat(f);(d("WAWebMsgReply").canPrivateReply(f)||d("WAWebMsgReply").canPrivateReplyInRestrictedGrp(f))&&g.push(r.jsx(M,{msg:f},"private_reply"));b&&(d("WAWebMsgGetters").getIsSentByMe(f)&&g.push(r.jsx(O,{msg:f,onClose:a},"dropdownMsgInfo")),g.push(r.jsx(B,{msg:f,type:w.Dropdown,onClose:a},"dropdownGoToMsg"),r.jsx(F,{isMediaDownloadable:e,msg:f,type:w.Dropdown},"dropdownDownload")));i!=null&&g.push(r.jsx(c("WAWebSearchTheWebButton.react"),{messageType:f.getWamMessageType(),msg:f,entryPoint:d("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwFormat:i},"search_the_web"));b=!d("WAWebChatGetters").getIsNewsletter(j)&&(f.isViewOnce||d("WAWebMsgActionCapability").canReportMsg(f));a=d("WAWebChatGetters").getIsNewsletter(j)&&d("WAWebMsgActionCapability").canReportMsg(f);a?g.push(r.jsx(c("WAWebReportNewsletterPostSpamButton.react"),{msg:f},"reportSpam")):b&&g.push(r.jsx(N,{msg:f},"reportSpam"));d("WAWebMsgActionCapability").canReportToAdmin(f)&&g.push(r.jsx(c("WAWebSendForAdminReviewButton.react"),{msg:f},"report_to_admin"));d("WAWebDebugGatingUtils").msgDebugMenuItemsEnabled()&&(g.push(r.jsx(d("WAWebDropdownItemSeparator.react").DropdownItemSeparator,{})),g.push(r.jsx(C,{msg:f})));return r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?r.jsx(d("WAWebMoreRefreshedIcon.react").MoreRefreshedIcon,{}):r.jsx(d("WAWebMenuIcon.react").MenuIcon,{}),title:h._(/*BTDS*/"Menu"),dropdownMenu:{menu:g,type:d("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:d("WAWebDropdown.react").DirX.LEFT},onOpen:function(){i!=null&&d("WAWebSearchTheWebEventLogger").logSTWEvent({stwEntryPoint:d("WAWebWamEnumStwEntryPoint").STW_ENTRY_POINT.MEDIA_VIEWER,stwInteraction:d("WAWebWamEnumStwInteraction").STW_INTERACTION.ENTRY_POINT_SURFACED,stwFormat:i,messageType:f.getWamMessageType()})}})}Q.displayName=Q.name+" [from "+f.id+"]";function R(a){var b=a.isMediaDownloadable,e=a.msg,f=a.onClose;a=a.onViewOnceInfoClick;return r.jsxs(r.Fragment,{children:[r.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:r.jsx(d("WAWebViewOnceIcon.react").ViewOnceIcon,{iconXstyle:c("WAWebMediaPanelHeader.styles").voIcon}),title:h._(/*BTDS*/"View once info"),onClick:a}),r.jsx(Q,{isMediaDownloadable:b,isAlbumMedia:!1,msg:e,onClose:f})]})}R.displayName=R.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebMediaSticker.react",["Promise","WAWebFirstPartyStickerInfo.react","WAWebFlex.react","WAWebImg.react","WAWebLottieSticker.react","WAWebMediaUrlProvider","WAWebMediaViewerStyles","WAWebMediaZoomable.react","WAWebNewsletterCollection","WAWebNewsletterMembershipUtil","WAWebStickerDetailsStickerPackInfo.react","WAWebStickerLikeMsgPlaceholder.react","WAWebStickerModel","WAWebStickerUtils","WAWebWamEnumWebcRmrReasonCode","react","stylex","useMergeRefs","useWAWebModelValues"],(function(a,b,c,d,e,f,g){var h=["ref"],i,j,k,l,m=l||c("react"),n=(k||(k=d("react"))).useRef,o=376,p={container:{width:"xh8yej3",height:"x5yr21d",$$css:!0}};function a(a){var e=a.ref,f=babelHelpers.objectWithoutPropertiesLoose(a,h),g=f.msg;a=d("useWAWebModelValues").useModelValues(f.mediaData,["encFilehash","directPath","filehash","mediaKey","mediaKeyTimestamp","mediaStage","mimetype","fullWidth","fullHeight","isFirstParty","isAvatar","stickerPackId","stickerPackName","stickerPackPublisher","extractedLottieSticker","accessibilityLabel"]);var k=n(null);e=c("useMergeRefs")(e,k);var l=function(a){var b;(b=k.current)==null||b.onClick(a)},q=function(){return g?g.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!1}):(i||(i=b("Promise"))).resolve()},r=c("WAWebNewsletterCollection").getActive(),s=d("WAWebNewsletterMembershipUtil").iAmAdminOrOwner(r==null?void 0:r.newsletterMetadata);r=a.isFirstParty===!0?m.jsx(c("WAWebFirstPartyStickerInfo.react"),{stickerPackId:a.stickerPackId,onStickerPackView:f.onStickerPackView,stickerPackViewDelay:f.stickerPackViewDelay,showViewPackButton:r!=null?a.isAvatar!==!0&&s:a.isAvatar!==!0,sticker:new(d("WAWebStickerModel").StickerModel)({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})}):m.jsx(d("WAWebStickerDetailsStickerPackInfo.react").StickerDetailsStickerPackInfo,{name:a.stickerPackName,publisher:a.stickerPackPublisher,theme:d("WAWebStickerDetailsStickerPackInfo.react").Theme.MediaViewer,sticker:new(d("WAWebStickerModel").StickerModel)({id:a.filehash,mimetype:a.mimetype,width:a.fullWidth,height:a.fullHeight,filehash:a.filehash,encFilehash:a.encFilehash,directPath:a.directPath,mediaKey:a.mediaKey,mediaKeyTimestamp:a.mediaKeyTimestamp})});s=m.jsx(c("WAWebMediaUrlProvider"),{mediaData:a,placeholderRenderer:function(){return m.jsx(c("WAWebStickerLikeMsgPlaceholder.react"),{size:o})},downloadMedia:q,children:function(a){return m.jsx(c("WAWebImg.react"),{className:(j||(j=c("stylex")))(c("WAWebMediaViewerStyles").content),onClick:l,src:a,onLoad:f.onLoad})}});d("WAWebStickerUtils").getStickerFileType(a.mimetype)===d("WAWebStickerUtils").StickerFileType.LOTTIE&&(s=m.jsx(c("WAWebLottieSticker.react"),{className:"",mediaData:a,startAnimation:!0,onClick:l,placeholderRenderer:function(){return null},downloadMedia:q}));return m.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",justify:"center",xstyle:p.container,children:[m.jsx("div",babelHelpers["extends"]({className:"xh8yej3 x5yr21d xlnrm6 xjkwb7i x1iymm2a xyw6214"},{"data-testid":void 0,children:m.jsx(c("WAWebMediaZoomable.react"),{ref:e,width:a.fullWidth,height:a.fullHeight,onZoomIn:f.onImgZoomIn,msg:g,children:s})})),r]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaViewerCaption.react",["WAWebFormatConfiguration","WAWebMsgLinks","WAWebMsgPhoneNumbers"],(function(a,b,c,d,e,f,g){function a(a){var b=a.msg;a=a.id;return d("WAWebFormatConfiguration").Conversation({mentions:b.mentionMap(),groupMentions:b.groupMentionMap(),phoneNumbers:d("WAWebMsgPhoneNumbers").getPhoneNumbersFromMsg(b),links:d("WAWebMsgLinks").getLinksFromMsg(b),trusted:!0,fromMe:a.fromMe,fromChatWid:a.remote,parseLists:!0,parseQuotes:!0,parseInlineCode:!0})}g.getCaptionFormatters=a}),98);
__d("WAWebMediaViewerMediaVideo.react",["fbt","WAWebAddOnBubbleType","WAWebAddOnBubblesContainer.react","WAWebAnnotation.react","WAWebBlurredImage.react","WAWebGetDisplayType","WAWebMediaTypes","WAWebMediaViewerStyles","WAWebMsgGetters","WAWebNoop","WAWebObjectFit.react","WAWebPipConst","WAWebPipFloatingVideoPlayer.react","WAWebPipMsgVideoPlayer.react","WAWebReactionsUtils","WAWebUIRefreshGatingUtils","WAWebVideo.react","WAWebWamEnumWebcRmrReasonCode","isNonZeroNumber","react","stylex","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i=["ref"],j,k,l;b=l||d("react");var m=j||(j=c("react")),n=b.useEffect,o=b.useImperativeHandle,p=b.useMemo,q=b.useRef,r=b.useState;function a(a){var b=a.ref;a=babelHelpers.objectWithoutPropertiesLoose(a,i);var e=a.autoPlay,f=a.msg,g=a.onLoad,j=a.onClose,l=a.onLoadedData,u=a.startTime;u=u===void 0?0:u;var v=d("useWAWebModelValues").useModelValues(a.mediaData,["mediaStage","fullWidth","fullHeight","isGif","isViewOnce","preview","renderableUrl","streamable"]);a=r(!1);var w=a[0],x=a[1];a=r(!0);var y=a[0],z=a[1],A=q();a=p(function(){return(v.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED||v.streamable&&v.isStreamable())&&d("isNonZeroNumber").isNonZeroNumber(v.fullWidth)&&d("isNonZeroNumber").isNonZeroNumber(v.fullHeight)?s(v):{width:0,height:0}},[v]);n(function(){if(!v.isStreamable()){void f.downloadMedia({downloadEvenIfExpensive:!0,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.MEDIA_VIEWER,isUserInitiated:!0});return function(){f.mediaObject&&f.cancelDownload()}}},[]);var B=function(a){x(a)};o(b,function(){return{getContainerElement:function(){return A.current},closingMedia:function(){z(!1)}}});b=v.isGif;var C=v.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED||v.streamable&&v.isStreamable();C=C||f!=null&&f.isForcingRMR();var D=null,E=d("WAWebGetDisplayType").getDisplayType(f),F=d("WAWebAddOnBubbleType").AddOnBubbleType.MEDIA_VIEWER;f&&d("WAWebReactionsUtils").shouldShowReactionBubble(f,F)&&(D=m.jsx(c("WAWebAddOnBubblesContainer.react"),{isOutgoingMsg:d("WAWebMsgGetters").getIsSentByMe(f),displayType:E,bubbleType:F,parentIds:[f.id.toString()],displayReactionBubble:y}));if(C){E=d("WAWebUIRefreshGatingUtils").checkIfShouldBeEnabledInWindowsEnv()?h._(/*BTDS*/"Video playback is not supported on this device."):h._(/*BTDS*/"Your browser doesn't support video playback.");var G;!w&&f!=null&&f.interactiveAnnotations&&f.interactiveAnnotations.length>0&&(G=m.jsx(c("WAWebAnnotation.react"),{annotations:f.interactiveAnnotations}));b?F=m.jsxs("div",babelHelpers["extends"]({},(k||(k=c("stylex"))).props(c("WAWebMediaViewerStyles").content),{ref:A,"data-testid":void 0,children:[m.jsx(c("WAWebVideo.react"),{src:v.renderableUrl,onClick:t,autoPlay:!0,loop:!0,onLoadedData:l,children:E}),G]})):F=m.jsx("div",babelHelpers["extends"]({ref:A},(k||(k=c("stylex"))).props(c("WAWebMediaViewerStyles").content),{onClick:t,"data-testid":void 0,children:m.jsx(d("WAWebPipMsgVideoPlayer.react").WrappedMsgVideoPlayer,{msg:f,mediaData:v,startTime:u,onClose:j,onError:c("WAWebNoop"),onFullscreenToggle:B,autoPlay:e,type:d("WAWebPipConst").PlayerType.MEDIA_VIEWER,overlays:G,noPip:f==null?void 0:f.isViewOnce,onLoadedData:l})}));return m.jsxs(c("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:a,onObjectLoad:g,children:[F,D]})}return m.jsxs(c("WAWebObjectFit.react"),{type:"scaleDown",position:"relative",objectPosition:"relative",size:{width:v.fullWidth,height:v.fullHeight},children:[m.jsx(c("WAWebBlurredImage.react"),{altText:(y=f.caption)!=null?y:"",mediaData:v}),D]})}a.displayName=a.name+" [from "+f.id+"]";function s(a){if(a.isGif){var b=330;return a.fullWidth>=b?{width:a.fullWidth,height:a.fullHeight}:{width:b,height:a.fullHeight*b/a.fullWidth}}return a.fullWidth>=d("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH?{width:a.fullWidth,height:a.fullHeight}:{width:d("WAWebPipFloatingVideoPlayer.react").MIN_WIDTH,height:a.fullHeight}}function t(a){a.stopPropagation()}g["default"]=a}),226);
__d("WAWebMediaViewerModal.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={mediaCaption:"_alhf"};b=a;g["default"]=b}),98);
__d("WAWebViewOnceSenderNuxIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="view-once-sender-nux";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=168;o=198;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 198 168",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),fill:"none",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M182.166 57.7255C175.603 64.6681 166.307 69 156 69C139.711 69 125.949 58.1818 121.506 43.3383C112.644 40.1443 102.78 34.6399 86.1179 25.3418C84.3675 24.3651 82.5421 23.3465 80.635 22.2843C51.9895 6.3297 6.00593 19.7651 2.23678 73.9266C-0.243988 109.575 17.0718 134.232 39.9408 142.968C62.0404 151.411 110.667 158.989 162.477 140.97C190.944 131.069 198.637 111.677 196.725 89.4613C195.454 74.6999 189.899 64.4184 182.166 57.7255Z",fill:"#CCEFEB"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M134.277 61.7099C125.603 55.1366 120 44.7226 120 33C120 29.0037 120.651 25.1594 121.853 21.5676L80.2307 15.7179C73.8904 14.8269 68.016 19.3544 67.11 25.8304L50.5682 144.067C49.6622 150.543 54.0676 156.515 60.4079 157.406L108.242 164.129C114.583 165.02 120.457 160.493 121.363 154.016L134.277 61.7099Z",fill:"#42CBA5"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M122.943 18.7215L80.4885 12.755C73.9412 11.8348 67.8737 16.5197 66.9365 23.219L49.8245 145.531C48.8872 152.231 53.4351 158.407 59.9824 159.327L109.378 166.27C115.925 167.19 121.993 162.505 122.93 155.806L135.929 62.8902C135.129 62.3519 134.352 61.7824 133.599 61.1834L120.411 155.452C119.673 160.727 114.895 164.417 109.739 163.692L60.343 156.75C55.187 156.025 51.6056 151.161 52.3437 145.885L69.4557 23.573C70.1938 18.2974 74.9719 14.608 80.1279 15.3326L121.974 21.2137C122.266 20.3682 122.59 19.537 122.943 18.7215Z",fill:"#316474"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M135.032 62.2669C125.93 55.7339 120 45.0594 120 33C120 27.0332 121.452 21.4055 124.021 16.4507L82.3684 10.5968C76.0897 9.71436 70.2654 14.2484 69.3594 20.7238L52.8193 138.948C51.9134 145.424 56.2689 151.388 62.5476 152.271L109.917 158.928C116.196 159.81 122.02 155.276 122.926 148.801L135.032 62.2669Z",fill:"white"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M124.376 15.7826L80.8832 9.67008C74.3203 8.74772 68.2607 13.2841 67.3488 19.8023L50.6993 138.809C49.7874 145.327 54.3684 151.359 60.9313 152.281L110.445 159.24C117.008 160.162 123.067 155.626 123.979 149.108L136.032 62.959C135.229 62.4232 134.45 61.856 133.695 61.2591L121.454 148.753C120.736 153.886 115.964 157.458 110.796 156.732L61.2822 149.773C56.1139 149.047 52.5063 144.297 53.2245 139.164L69.874 20.1572C70.5921 15.0241 75.364 11.4517 80.5323 12.1781L123.186 18.1726C123.554 17.3594 123.951 16.5623 124.376 15.7826Z",fill:"#316474"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M121.759 21.8546L119.225 21.5025L88.5269 17.2367L81.6788 16.2851C76.9838 15.6327 72.6359 18.9334 71.9674 23.6575L56.0988 135.806C55.4304 140.53 58.6946 144.888 63.3896 145.541L107.784 151.71C112.479 152.362 116.827 149.061 117.495 144.337L129.762 57.6491C123.708 51.2078 120 42.5372 120 33.0005C120 29.1102 120.617 25.364 121.759 21.8546Z",fill:"#EEFEFA"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.411 59.2946L119.092 146.356C118.408 151.187 113.925 154.558 109.079 153.885L63.2521 147.516C58.4056 146.843 55.031 142.38 55.7146 137.549L71.9439 22.852C72.6275 18.0206 77.1105 14.6499 81.957 15.3233L122.084 20.8994C121.801 21.6938 121.545 22.501 121.316 23.32L81.6063 17.802C78.133 17.3193 74.9202 19.735 74.4302 23.1975L58.201 137.895C57.711 141.357 60.1295 144.555 63.6028 145.038L109.429 151.406C112.903 151.889 116.116 149.473 116.605 146.01L129.195 57.0327C129.901 57.8186 130.64 58.5733 131.411 59.2946Z",fill:"#316474"}),k.jsx("path",{d:"M76.7691 93.7377C76.4214 96.1974 78.1329 98.4706 80.5929 98.8163L111.741 103.194C114.202 103.54 116.481 101.824 116.83 99.3627L119.073 83.5207C119.421 81.0608 117.709 78.787 115.249 78.4413L73.6586 72.5961C73.183 72.5293 72.895 73.106 73.2346 73.4451L76.5525 76.7581C77.9966 78.2 78.6778 80.2374 78.3919 82.2594L76.7691 93.7377Z",fill:"white",stroke:"#00B39B",strokeWidth:3}),k.jsx("path",{d:"M107.679 93.8443L87.8798 91.0618C87.0681 90.9477 86.7049 90.084 87.2785 89.5941L91.8745 85.6237C92.3348 85.2215 93.1268 85.3328 93.4584 85.8463L96.5327 90.5489L102.507 85.389C102.968 84.9869 103.76 85.0982 104.091 85.6116L108.661 92.5992C109.078 93.2283 108.491 93.9584 107.679 93.8443Z",fill:"white"}),k.jsx("path",{d:"M96.7971 88.6689L94.5062 85.1645C93.7607 84.0152 92.0887 83.7802 91.0553 84.6795L86.4635 88.6463C85.7435 89.2636 85.5901 90.1864 85.9046 90.9467C86.205 91.6728 86.8893 92.1848 87.7059 92.2996L107.505 95.0822C108.321 95.1969 109.12 94.8933 109.609 94.2782C110.121 93.6341 110.228 92.7048 109.706 91.913C109.705 91.9118 109.705 91.9106 109.704 91.9094L105.141 84.9334C105.14 84.9321 105.14 84.9309 105.139 84.9296C104.393 83.7805 102.721 83.5456 101.688 84.4449L96.7971 88.6689Z",stroke:"#42CBA5",strokeOpacity:.5,strokeWidth:2.5}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M81 22.999C80.4477 22.999 80 23.4467 80 23.999C80 24.5513 80.4477 24.999 81 24.999C81.5523 24.999 82 24.5513 82 23.999C82 23.4467 81.5523 22.999 81 22.999ZM78 23.999C78 22.3422 79.3431 20.999 81 20.999C82.6569 20.999 84 22.3422 84 23.999C84 25.6559 82.6569 26.999 81 26.999C79.3431 26.999 78 25.6559 78 23.999Z",fill:"#316474"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M155.502 62C156.019 62 156.532 61.9866 157.043 61.9603C158.421 61.8892 159.482 60.7138 159.41 59.3349C159.339 57.956 158.164 56.8958 156.785 56.967C156.36 56.9889 155.933 57 155.502 57V62ZM155.502 8C155.933 8.00003 156.36 8.01114 156.785 8.03304C158.164 8.10415 159.339 7.044 159.41 5.66512C159.482 4.28624 158.421 3.11079 157.043 3.03968C156.532 3.01336 156.019 3.00003 155.502 3V8ZM168.898 6.21114C167.668 5.58332 166.162 6.07124 165.534 7.30096C164.906 8.53067 165.394 10.0365 166.624 10.6643C167.388 11.0543 168.128 11.4832 168.844 11.9485C170.001 12.7016 171.549 12.3739 172.303 11.2167C173.056 10.0594 172.728 8.51077 171.571 7.75771C170.71 7.19753 169.818 6.68094 168.898 6.21114ZM180.243 16.4297C179.49 15.2724 177.941 14.9447 176.784 15.6978C175.626 16.4509 175.299 17.9995 176.052 19.1568C176.517 19.8719 176.946 20.6126 177.336 21.3764C177.964 22.6061 179.47 23.094 180.699 22.4662C181.929 21.8384 182.417 20.3325 181.789 19.1028C181.319 18.1826 180.803 17.2905 180.243 16.4297ZM184.961 30.9578C184.89 29.5789 183.714 28.5188 182.335 28.5899C180.956 28.661 179.896 29.8365 179.967 31.2153C179.989 31.6406 180 32.0689 180 32.5C180 32.9311 179.989 33.3594 179.967 33.7847C179.896 35.1635 180.956 36.339 182.335 36.4101C183.714 36.4812 184.89 35.4211 184.961 34.0422C184.987 33.5312 185 33.0171 185 32.5C185 31.9829 184.987 31.4688 184.961 30.9578ZM181.789 45.8972C182.417 44.6675 181.929 43.1616 180.699 42.5338C179.47 41.906 177.964 42.3939 177.336 43.6236C176.946 44.3874 176.517 45.1281 176.052 45.8432C175.299 47.0005 175.626 48.5491 176.784 49.3022C177.941 50.0553 179.49 49.7276 180.243 48.5703C180.803 47.7095 181.319 46.8174 181.789 45.8972ZM171.571 57.2423C172.728 56.4892 173.056 54.9406 172.303 53.7833C171.549 52.6261 170.001 52.2984 168.844 53.0515C168.128 53.5168 167.388 53.9457 166.624 54.3357C165.394 54.9635 164.906 56.4693 165.534 57.699C166.162 58.9288 167.668 59.4167 168.898 58.7889C169.818 58.3191 170.71 57.8025 171.571 57.2423Z",fill:"#00B39B"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M155.501 3C155.5 3 155.5 3 155.5 3C139.208 3 126 16.2076 126 32.5C126 48.7924 139.208 62 155.5 62C155.5 62 155.5 62 155.501 62V57C155.5 57 155.5 57 155.5 57C141.969 57 131 46.031 131 32.5C131 18.969 141.969 8 155.5 8C155.5 8 155.5 8 155.501 8V3Z",fill:"#00B39B"}),k.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M151.57 18.499C149.875 18.499 148.501 19.8727 148.501 21.5672C148.501 23.2617 149.875 24.6354 151.57 24.6354H154.502V42.499C154.502 44.1559 155.845 45.499 157.502 45.499C159.158 45.499 160.502 44.1559 160.502 42.499V21.499C160.502 19.8422 159.158 18.499 157.502 18.499C157.49 18.499 157.479 18.4991 157.468 18.4992C157.456 18.4991 157.445 18.499 157.433 18.499H151.57Z",fill:"#00B39B"})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.ViewOnceSenderNuxIcon=a}),98);
__d("WAWebWdsIllViewOncePhotoIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(a,b,c,d,e,f,g){var h=["iconXstyle","height","width","name","viewBox"],i,j,k=i||c("react"),l="wds-ill-view-once-photo";function a(a){var b=a.iconXstyle,e=a.height,f=a.width,g=a.name,i=a.viewBox;a=babelHelpers.objectWithoutPropertiesLoose(a,h);var m;if(i){var n=i.x;n=n===void 0?0:n;var o=i.y;o=o===void 0?0:o;var p=i.width;p=p===void 0?0:p;i=i.height;i=i===void 0?0:i;m=[n,o,p,i].join(" ")}n=120;o=180;(e!=null||f!=null)&&(n=e,o=f);return k.jsx(d("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers["extends"]({name:g!=null?g:l},a,{children:k.jsxs("svg",{viewBox:m!=null?m:"0 0 180 120",height:n,width:o,preserveAspectRatio:"xMidYMid meet",className:(j||(j=c("stylex")))(b),version:"1.1",id:"Layer_1",x:"0",y:"0",children:[k.jsx("title",{children:g!=null?g:l}),k.jsx("style",{children:".st0{fill:#25d366;stroke:#111b21;stroke-width:1.4412;stroke-linecap:round;stroke-miterlimit:10}.st2,.st4{fill:#e6ffda;stroke:#111b21;stroke-width:1.5}.st4{fill:#fcf5eb;stroke-miterlimit:10}.st6{fill:#0a0a0a}"}),k.jsx("path",{className:"st0",d:"M82 1.3H33.2c-8.7 0-15.8 7.1-15.8 15.8V103c0 8.7 7.1 15.8 15.8 15.8h48.9c8.7 0 15.8-7.1 15.8-15.8V17.2C97.8 8.4 90.7 1.3 82 1.3z"}),k.jsx("path",{className:"st0",d:"M97.8 95.7V17.1c0-8.6-7-15.6-15.6-15.6H40.3c-8.6 0-15.6 7-15.6 15.6v78.7c0 8.7 5 15.8 15.8 15.8h41.6c8.3 0 15.7-7.1 15.7-15.9q0 0 0 0z"}),k.jsx("path",{className:"st0",d:"M61.2 103c5 0 9-2.2 9-4.8s-4-4.8-9-4.8-9 2.2-9 4.8 4 4.8 9 4.8z"}),k.jsx("path",{d:"M55.6 14.4H67",fill:"none",stroke:"#111b21",strokeWidth:1.441,strokeLinecap:"round",strokeMiterlimit:10}),k.jsx("path",{className:"st2",d:"M133.8 86.3H73.3c-3.5 0-6.1-.8-7.7-2.5-1.6-1.6-2.6-4.1-2.6-7.5V33.6c0-3.5.9-6 2.6-7.6 1.6-1.6 4.1-2.5 7.7-2.5h60.5c3.6 0 6.1.9 7.7 2.5s2.5 4.1 2.5 7.6v42.7c0 3.5-.9 6-2.5 7.5-1.7 1.7-4.3 2.5-7.7 2.5z"}),k.jsx("path",{d:"M143.6 75.6 121.7 55c-1.6-1.4-3.6-2.3-5.5-2.3-2.1 0-3.8.7-5.5 2.3L93.9 69.9l-6.8-6.2c-1.5-1.4-3.3-2.1-5-2.1-1.6 0-3.2.6-4.7 2.1L63.3 76.3",fill:"none",stroke:"#111b21",strokeWidth:1.5}),k.jsx("path",{className:"st2",d:"M96.6 47.1c0 4.1-3.4 7.5-7.4 7.5-4.1 0-7.5-3.4-7.5-7.5s3.4-7.5 7.5-7.5c4 0 7.4 3.3 7.4 7.5z"}),k.jsx("path",{className:"st4",d:"M162.6 76c0 11.3-9.1 20.4-20.4 20.4s-20.4-9.1-20.4-20.4 9.1-20.4 20.4-20.4 20.4 9.1 20.4 20.4z"}),k.jsx("path",{d:"M141.8 59.2c-8.6.5-15.5 6.9-16.5 14.5-1.2 9 6.1 18.3 16.5 19.1",fill:"none",stroke:"#111b21",strokeWidth:1.5,strokeLinecap:"round",strokeMiterlimit:10}),k.jsx("path",{className:"st4",d:"M143.8 84c.7 0 1.3-.6 1.3-1.3V70c0-1.3-1.2-2.4-2.6-2.1l-3.4.8c-.9.2-1.5 1-1.5 2.1 0 1.3 1.2 2.3 2.5 2.1l1-.2v10.1c0 .7.6 1.3 1.3 1.3z"}),k.jsx("circle",{className:"st6",cx:149.8,cy:61.6,r:1.5}),k.jsx("circle",{className:"st6",cx:155.9,cy:67.9,r:1.5}),k.jsx("circle",{className:"st6",cx:158.2,cy:76.3,r:1.5}),k.jsx("circle",{className:"st6",cx:155.9,cy:84.8,r:1.5}),k.jsx("circle",{className:"st6",cx:150.1,cy:90.6,r:1.5})]})}))}a.displayName=a.name+" [from "+f.id+"]";g.WdsIllViewOncePhotoIcon=a}),98);
__d("WAWebViewOnceNux.react",["fbt","WAWebConfirmPopup.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebFlexItem.react","WAWebText.react","WAWebUIRefreshGatingUtils","WAWebViewOnceSenderNuxIcon.react","WAWebWdsIllViewOncePhotoIcon.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={graphic:{marginBottom:"xod5an3",paddingTop:"x1cnzs8",paddingInlineEnd:"x1xnnf8n",paddingBottom:"xx6bls6",paddingInlineStart:"x106a9eq",$$css:!0}};function a(a){var b=a.onOkClick;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:b,cancelText:h._(/*BTDS*/"Learn more"),onCancel:function(){d("WAWebExternalLink.react").openExternalLink(d("WAWebFaqUrl").getViewOnceFaqUrl())},children:j.jsxs(d("WAWebFlex.react").FlexColumn,{children:[j.jsx(c("WAWebFlexItem.react"),{xstyle:k.graphic,align:"center",children:d("WAWebUIRefreshGatingUtils").uiRefreshM1Enabled()?j.jsx(d("WAWebWdsIllViewOncePhotoIcon.react").WdsIllViewOncePhotoIcon,{width:195}):j.jsx(d("WAWebViewOnceSenderNuxIcon.react").ViewOnceSenderNuxIcon,{width:130*1.5,height:118*1.5})}),j.jsx(d("WAWebText.react").WAWebTextLarge,{children:a.isPhoto?h._(/*BTDS*/"This photo is set to view once"):h._(/*BTDS*/"This video is set to view once")}),j.jsx(d("WAWebText.react").WAWebTextMuted,{children:a.isPhoto?h._(/*BTDS*/"For more privacy, this photo will disappear after you close it."):h._(/*BTDS*/"For more privacy, this video will disappear after you close it.")})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("WAWebMediaViewerModal.react",["fbt","WALogger","WATypeUtils","WAWebChevronButton.react","WAWebClassnames","WAWebEmojiText.react","WAWebFocusTracer","WAWebFrontendMsgGetters","WAWebGroupMetadataContext","WAWebKeyboardHotKeys.react","WAWebMarkPlayedMsgAction","WAWebMediaAudio.react","WAWebMediaData","WAWebMediaImage.react","WAWebMediaIncrementalZoom","WAWebMediaPanelHeader.react","WAWebMediaStage.react","WAWebMediaSticker.react","WAWebMediaTypes","WAWebMediaViewerCaption.react","WAWebMediaViewerConstants","WAWebMediaViewerFlow.react","WAWebMediaViewerMediaVideo.react","WAWebMediaViewerModal.scss","WAWebMediaViewerModalStyle","WAWebMetricsAttribution","WAWebMetricsAttributionTrackerTypes","WAWebModalManager","WAWebMsgActionCapability","WAWebMsgGetters","WAWebNux","WAWebResizeObserver.react","WAWebRound.react","WAWebTimeSpentLoggingNavigation","WAWebUISpacing","WAWebUimUie.react","WAWebVelocityAnimate","WAWebViewOnceNux.react","cr:23046","react","stylex","useWAWebModelValues","useWAWebMsgValues","useWAWebNux","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;e=n||d("react");var o=l||(l=c("react")),p=e.useContext,q=e.useEffect,aa=e.useMemo,r=e.useRef,s=e.useState;function t(a){a==null||a.stopPropagation()}function a(a){var e,f=a.msg,g=a.onImageLoad,l=a.isAnimatingThumbs,n=a.onImgZoomIn,t=a.onExitAnimation,v=a.onBack,da=a.shouldShowNumberText;e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,d("WAWebFrontendMsgGetters").getIsUnsentMedia,e.getIsViewOnce,e.getIsStickerMsg,e.getHasThumbList,e.getCaption,e.getInteractiveAnnotations,e.getType,e.getMessageSecret]);var w=e[0];e[1];e[2];var x=e[3],ea=e[4],y=e[5],z=e[6];e[7];e[8];e[9];e=d("WAWebFrontendMsgGetters").getChat(f);var A=d("useWAWebModelValues").useModelValues(a.mediaData,["mediaStage","type","isGif"]),B=p(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx),C=B.hasOverflownThumbnailSection;C=p(d("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext)||C;var D=r(null),E=r(null),F=r(null),G=r(null),H=r(!1),I=r(!1),J=r(!1),K=c("useWAWebNux")(d("WAWebNux").NUX.EPHEMERAL_VIEW_ONCE_RECEIVER),L=K[0],fa=K[1],ga=x&&L,M=a.getZoomNode,ha=aa(function(){return A.mediaStage===d("WAWebMediaTypes").MediaDataStage.RESOLVED&&M?M(w):null},[A.mediaStage,M,w]);K=s(!1);var N=K[0],ia=K[1],ja=B.isEnabled;L=s(!1);var ka=L[0],la=L[1],ma=[c("WAWebMediaData").TYPE.IMAGE,c("WAWebMediaData").TYPE.STICKER].includes(A.type);K=s(ma);var O=K[0],na=K[1];L=s(!a.isAnimatingThumbs&&!O);var P=L[0],oa=L[1];K=s(!1);L=K[0];var pa=K[1];K=x||!d("WAWebMsgActionCapability").canWamoSubMsgBeSharedByUser(f,e);var qa=function(){var a=o.jsx(c("WAWebViewOnceNux.react"),{isPhoto:A.type===c("WAWebMediaData").TYPE.IMAGE,onOkClick:function(){fa(),d("WAWebModalManager").ModalManager.close()}});d("WAWebModalManager").ModalManager.open(a)},Q=c("useWAWebThrottledCallback")(function(a,b){if(ka)return;var e=D.current;if(!e)return;var f=e.getInsideContainer();if(!f||!(f instanceof HTMLElement))return;var g=e.getOutsideContainer();if(!g||!(g instanceof HTMLElement))return;e=e.getTranslatePosition(g,a,b);g=e.translateX;a=e.translateY;c("WAWebVelocityAnimate")(f,"stop");c("WAWebVelocityAnimate")(f,{translateX:g,translateY:a,scale:d("WAWebMediaViewerConstants").ZOOM_IN_FACTOR},{duration:0})});q(function(){d("WALogger").LOG(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Opened"])));ga&&qa();c("WAWebFocusTracer").focus(G.current);return function(){d("WALogger").LOG(j||(j=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerModal: Closed"]))),ca(),Q.cancel()}},[]);q(function(){ba(A.type)},[A.type]);var ra=function(){qa()},sa=function(a,b){var e=b.getBoundingClientRect(),f=a.getBoundingClientRect(),g=f.top-e.top;f=f.left-e.left;e=a.clientWidth/b.clientWidth;var h=(b.clientHeight-a.clientHeight)/2;a=(b.clientWidth-a.clientWidth)/2;g-=h;f-=a;c("WAWebVelocityAnimate")(b,{opacity:[1,0],translateX:[0,f],translateY:[0,g],scale:[1,e]},{duration:d("WAWebMediaViewerConstants").ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){return na(!1)});a=(h=F.current)==null?void 0:h.getElement();a&&c("WAWebVelocityAnimate")(a,{opacity:[1,0]},{duration:d("WAWebMediaViewerConstants").ANIMATION_DURATION})},ta=function(){x&&d("WAWebMarkPlayedMsgAction").canMarkPlayed(f)&&d("WAWebMarkPlayedMsgAction").markPlayed(f)},R=function(a){ta();g&&g();var b=ha;a=a.target;if(!b||!a||!(a instanceof HTMLElement)||J.current||ja){na(!1);return}J.current=!0;sa(b,a)},S=function(){if(H.current)return;H.current=!0;d("WATypeUtils").isFunction(t)&&t();var b=a.getZoomNode&&a.getZoomNode(w);if(!b)return v();var e;if(ma&&D.current){var f;e=D.current.getInsideContainer();(f=D.current)==null||f.closingMediaZoomable()}else if(A.isGif&&E.current){e=E.current.getContainerElement();(f=E.current)==null||f.closingMedia()}if(!e)return v();f=e;var g=e.getBoundingClientRect(),h=b.getBoundingClientRect(),i=h.top-g.top;h=h.left-g.left;g=b.clientWidth/f.clientWidth;var j=(f.clientHeight-b.clientHeight)/2;f=(f.clientWidth-b.clientWidth)/2;i-=j;h-=f;c("WAWebVelocityAnimate")(e,{translateX:[h,0],translateY:[i,0],scale:[g,1]},{duration:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]}).then(function(){v()});j=(b=F.current)==null?void 0:b.getElement();j&&c("WAWebVelocityAnimate")(j,{opacity:[0,1]},{duration:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,easing:[.1,.82,.25,1]})},ua=function(b){var a=D.current;b&&a&&(I.current=a.getHeightOverflow()>0||a.getWidthOverflow()>0);ia(b);n(b)},va=function(b){Q.cancel();var a=D.current;a&&N&&a.onClick(b)},wa=function(a){if(ja)return;Q(a.pageX,a.pageY)},xa=function(a){var b;b=(b=D.current)==null?void 0:b.getInsideContainer();b=Boolean(b==null?void 0:b.contains(document.activeElement));if(l||O||!b)return;Q.cancel();b=D.current;b!=null&&b.onKeyboardZoom(a)},ya=function(){pa(!0)},za=function(){pa(!1)},T=function(){la(!0)},U=function(){la(!1)};q(function(){!P&&!l&&!O&&oa(!0)},[l,P,O]);d("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"media-viewer"});var V=null,W=a.msgIndexInAlbum>=0&&a.albumSize>=0;if(z||W){var X=function(){var a=z==null&&Y!=null?Y:z;a=[{testid:"media-caption",text:a}];da&&z!=null&&Y!=null&&a.push({testid:"media-number-caption",text:Y});return a},Y;W&&(Y=h._(/*BTDS*/"{number} of {totalNumber}",[h._param("number",a.msgIndexInAlbum+1),h._param("totalNumber",a.albumSize)]));W=d("WAWebMediaViewerCaption.react").getCaptionFormatters({msg:f,id:w});var Z=A.type===c("WAWebMediaData").TYPE.IMAGE&&!x;Z=!P&&(A.isGif||Z)||B.isZoomedIn;var Aa={className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaViewerModal.scss").mediaCaption,(m||(m=c("stylex")))(c("WAWebMediaViewerModalStyle").mediaCaption,Z&&c("WAWebMediaViewerModalStyle").mediaCaptionHidden)),formatters:W};V=o.jsx(o.Fragment,{children:X().map(function(a,b){return o.jsx("div",{children:o.jsx(d("WAWebEmojiText.react").EmojiText,babelHelpers["extends"]({},a,Aa,{ref:function(a){F.current=a}}))},b)})})}Z=babelHelpers["extends"]({},(m||(m=c("stylex"))).props(c("WAWebMediaViewerModalStyle").captionWrapper,C&&c("WAWebMediaViewerModalStyle").captionWrapperZoomedIn));V=B.isEnabled?o.jsx(c("WAWebResizeObserver.react"),babelHelpers["extends"]({component:"p",onResize:function(a){B.setCaptionHeight(a.height)}},Z,{children:V})):o.jsx("p",babelHelpers["extends"]({},Z,{children:V}));var $;switch(A.type){case c("WAWebMediaData").TYPE.IMAGE:$=o.jsx(c("WAWebMediaImage.react"),{msg:f,mediaData:A,onLoad:R,onImgZoomIn:ua,onAnnotationTooltipDisplay:T,onAnnotationTooltipDismiss:U,preventDownload:K,ref:D},w.toString());break;case c("WAWebMediaData").TYPE.STICKER:$=o.jsx(c("WAWebMediaSticker.react"),{msg:f,mediaData:A,onLoad:R,onImgZoomIn:ua,onStickerPackView:S,stickerPackViewDelay:d("WAWebMediaViewerConstants").CLOSE_ANIMATION_DURATION,ref:D},w.toString());break;case c("WAWebMediaData").TYPE.VIDEO:$=o.jsx(c("WAWebMediaViewerMediaVideo.react"),{autoPlay:!ga,msg:f,mediaData:A,onLoadedData:A.isGif?R:ta,startTime:a.startTime,onClose:S,ref:E},w.toString());break;case c("WAWebMediaData").TYPE.AUDIO:$=o.jsx(c("WAWebMediaAudio.react"),{mediaData:A,msg:f},w.toString());break;default:d("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["type: ",""])),A.type).sendLogs("MediaViewerModal: unexpected media type")}W=m(c("WAWebMediaViewerModalStyle").media,!!V&&c("WAWebMediaViewerModalStyle").mediaWithCaption);C=(X=b("cr:23046")==null?void 0:b("cr:23046").isWindowsHybridEnabled())!=null?X:!1;Z=d("WAWebClassnames").classnamesConvertMeToStylexPlease("overlay",m((O||l)&&c("WAWebMediaViewerModalStyle").mediaViewerAnimate,N&&c("WAWebMediaViewerModalStyle").cursorZoomOut,c("WAWebMediaViewerModalStyle").mediaViewer,!y&&d("WAWebUISpacing").uiPadding.bottom40,C&&c("WAWebMediaViewerModalStyle").mediaViewerHybrid));T=N&&I.current?wa:null;U=N?va:null;K=N?null:S;K!=null&&x&&(K=ya);return o.jsx(d("WAWebUimUie.react").UIE,{displayName:"MediaViewer",escapable:!0,requestDismiss:function(a,b){if(!B.isEnabled){S();return}a=b instanceof KeyboardEvent&&b.key==="Escape";if(!a||B.currentZoomLevel===1){S();return}(b=B.getHandler())==null||b.performZoom(1)},children:o.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{space:xa,enter:xa},ref:G,children:o.jsxs("div",{className:Z,"data-animate-media-viewer":!0,"data-testid":void 0,onClick:U,onMouseMove:T,children:[o.jsx(c("WAWebMediaPanelHeader.react"),{isHighlightClose:L,msg:f,mediaData:A,onClose:S,onHightlightCloseEnd:za,onViewOnceInfoClick:ra,msgIndexInAlbum:a.msgIndexInAlbum}),o.jsx("div",babelHelpers["extends"]({},m.props([c("WAWebMediaViewerModalStyle").mediaContent,d("WAWebUISpacing").uiPadding.top10,d("WAWebUISpacing").uiPadding.bottom15],ea&&c("WAWebMediaViewerModalStyle").mediaContentSticker),{onClick:K,children:o.jsx(u,{hasNavigationButtons:y,onNext:a.onNext,onPrev:a.onPrev,imgZoomed:N,children:o.jsxs("div",{className:W,children:[o.jsx(c("WAWebMediaStage.react"),{msg:f,mediaData:A}),$,o.jsx(c("WAWebGroupMetadataContext").Provider,{value:e.groupMetadata,children:V})]})})}))]})})})}a.displayName=a.name+" [from "+f.id+"]";function u(a){var b=a.children,e=a.hasNavigationButtons,f=a.imgZoomed,g=a.onNext;a=a.onPrev;var h=p(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isEnabled,i=p(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx).isZoomedIn;return o.jsxs(o.Fragment,{children:[e&&o.jsx("div",babelHelpers["extends"]({},(m||(m=c("stylex"))).props(c("WAWebMediaViewerModalStyle").mediaNavBtn,c("WAWebMediaViewerModalStyle").mediaNavBtnPrev,i&&c("WAWebMediaViewerModalStyle").mediaNavBtnHidden,h&&c("WAWebMediaViewerModalStyle").mediaNavBtnPrevIncrementalZoom),{children:o.jsx("div",{onClick:a?null:t,children:o.jsx(d("WAWebChevronButton.react").ChevronButton,{type:d("WAWebChevronButton.react").ButtonType.Prev,onClick:a!=null?a:void 0,onKeyDown:a!=null?a:void 0,disabled:!a||f,theme:d("WAWebRound.react").RoundTheme.Default,testid:void 0})})})),b,e&&o.jsx("div",babelHelpers["extends"]({},(m||(m=c("stylex"))).props(c("WAWebMediaViewerModalStyle").mediaNavBtn,c("WAWebMediaViewerModalStyle").mediaNavBtnNext,i&&c("WAWebMediaViewerModalStyle").mediaNavBtnHidden,h&&c("WAWebMediaViewerModalStyle").mediaNavBtnNextIncrementalZoom),{children:o.jsx("div",{onClick:g?null:t,children:o.jsx(d("WAWebChevronButton.react").ChevronButton,{type:d("WAWebChevronButton.react").ButtonType.Next,onClick:g!=null?g:void 0,onKeyDown:g!=null?g:void 0,disabled:!g||f,theme:d("WAWebRound.react").RoundTheme.Default,testid:void 0})})}))]})}u.displayName=u.name+" [from "+f.id+"]";function ba(a){d("WAWebMetricsAttribution").MetricsAttributionTracker.start(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpen),d("WAWebMetricsAttribution").MetricsAttributionTracker.stop(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenImage),d("WAWebMetricsAttribution").MetricsAttributionTracker.stop(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenVideo),a===c("WAWebMediaData").TYPE.IMAGE?d("WAWebMetricsAttribution").MetricsAttributionTracker.start(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenImage):a===c("WAWebMediaData").TYPE.VIDEO&&d("WAWebMetricsAttribution").MetricsAttributionTracker.start(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenVideo)}function ca(){d("WAWebMetricsAttribution").MetricsAttributionTracker.stop(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpen),d("WAWebMetricsAttribution").MetricsAttributionTracker.stop(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenImage),d("WAWebMetricsAttribution").MetricsAttributionTracker.stop(d("WAWebMetricsAttributionTrackerTypes").AttributionTrackerType.MediaOpenVideo)}g["default"]=a}),226);
__d("WAWebThumbList.react",["fbt","WALogger","WAMapsShallowEqual","WAWebAllMediaCollection","WAWebFocusTracer","WAWebMediaIncrementalZoom","WAWebMediaThumb.react","WAWebMediaViewerFlow.react","WAWebMsgGetters","WAWebSpinner.react","WAWebUISpacing","react","stylex","useWAWebPrevious","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g,h){var i,j,k,l;e=l||d("react");var m=j||(j=c("react")),n=e.useCallback,o=e.useContext,p=e.useEffect,q=e.useImperativeHandle,r=e.useLayoutEffect,s=e.useRef,t=e.useState,u={viewerThumbs:{display:"x78zum5",width:"xh8yej3",overflowX:"x14aock7",$$css:!0},mediaThumb:{position:"x1n2onr6",boxSizing:"x9f619",display:"x78zum5",flex:"x3psx0u",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x9whnou",minWidth:"xa06r8k",maxWidth:"xr6zewm",height:"xuzvuw4",$$css:!0}};function a(a){var b=a.activeMsg,e=a.highlightedMsgIds,f=a.mediaMsgs,g=a.msgIdToPreferPreview,h=a.onSelectThumb,j=a.onSetActiveThumb;a=a.ref;var l=s({}),n=function(){var a=b.id.toString();a=l.current[a];a&&c("WAWebFocusTracer").focus(a)};q(a,function(){return{focusOnActive:n}});var o=e!=null&&e.size>0&&e.has(b.id.toString()),p=[],r=function(a,b){l.current[b]=a};a=f instanceof d("WAWebAllMediaCollection").WAWebAllMediaCollection?f.getMsgsAround(b,50):f;a.forEach(function(a){if(a.mediaData==null){var c=b;d("WALogger").WARN(i||(i=babelHelpers.taggedTemplateLiteralLoose(["MediaViewerFlow: attempted to render a msg without mediaData: ",""])),JSON.stringify({type:a.type,isMedia:d("WAWebMsgGetters").getIsMedia(a),startMsgType:c.type,startMsgIsMedia:d("WAWebMsgGetters").getIsMedia(c)})).verbose();return}c=o&&e&&!e.has(a.id.toString())?"viewerFlowTransparent":"viewerFlow";p.push(m.jsx(d("WAWebMediaThumb.react").MediaThumb,{theme:c,active:a===b,msg:a,containerRef:function(c){r(c,a.id.toString()),a===b&&j(c)},onClick:function(){h(a)},preferPreview:!!g.get(a.id.toString()),showTooltip:d("WAWebMsgGetters").getIsGroupMsg(a),tabIndex:a===b?0:-1},"media-"+a.id.id))});a=(k||(k=c("stylex")))(u.mediaThumb,d("WAWebUISpacing").uiMargin.end8);p.push(m.jsx("div",{className:a,children:f.queryMediaAfter!=null?m.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-right"));p.unshift(m.jsx("div",{className:a,children:f.queryMediaBefore!=null?m.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24}):null},"spinner-left"));p.push(m.createElement("div",babelHelpers["extends"]({className:"x1mkiy5m"},{key:"padding-right"})));p.unshift(m.createElement("div",babelHelpers["extends"]({className:"x1mkiy5m"},{key:"padding-left"})));return m.jsx(m.Fragment,{children:p})}a.displayName=a.name+" [from "+f.id+"]";var v=a;function b(a){var b=o(d("WAWebMediaViewerFlow.react").MediaViewerFlowZoomContext),e=a.mediaMsgs,f=a.onScroll,g=a.activeMsg,i=a.moveUpAnimation,j=a.moveDownAnimation;x({moveDownAnimation:j,moveUpAnimation:i});var l=s({}),n=s(null),q=s(null),r=c("useWAWebPrevious")(g.id),w=function(){var a;(a=n.current)==null||a.focusOnActive()};p(function(){var a;(a=q.current)!=null&&a.contains(document.activeElement)&&!g.id.equals(r)&&w()},[g,r]);var y=function(a){a=l.current[a];if(!a)return!1;a=a.getBoundingClientRect();a=(a.left+a.right)/2;a=a>-1*window.innerWidth&&a<2*window.innerWidth;return!a},z=function(){var a=new Map();e.forEach(function(b){b=b.id.toString();a.set(b,y(b))});return a};j=t(z);var A=j[0],B=j[1],C=c("useWAWebThrottledCallback")(function(){var a=z();c("WAMapsShallowEqual")(A,a)||B(a)},100);i=function(a){C(),f(a)};j=b;return m.jsx("div",babelHelpers["extends"]({},{0:{className:"xsm26vf x10l6tqk x1ey2m1c xaivifb x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z x1sdoubt xg01cxk xqu7myx"},1:{className:"xsm26vf x10l6tqk x1ey2m1c xaivifb x9f619 x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 xh8yej3 xpyat2d x6ikm8r x10wlt62 x13fuv20 x178xt8z x1sdoubt xqu7myx x1yn0zye xvdu4fi"}}[!!j<<0],{ref:a.setRefThumbsContainer,children:m.jsx("div",babelHelpers["extends"]({ref:q},{className:"xh8yej3"},{dir:"ltr",children:m.jsx("div",babelHelpers["extends"]({role:"list","aria-label":h._(/*BTDS*/"Media list"),onScroll:i},(k||(k=c("stylex"))).props(u.viewerThumbs,d("WAWebUISpacing").uiPadding.vert8),{ref:a.setRefThumbs,children:m.jsx(v,{ref:n,mediaMsgs:e,highlightedMsgIds:a.highlightedMsgIds,activeMsg:a.activeMsg,onSetActiveThumb:a.onSetActiveThumb,onSelectThumb:a.onSelectThumb,msgIdToPreferPreview:A})}))}))}))}b.displayName=b.name+" [from "+f.id+"]";var w=200;function x(a){var b=a.moveDownAnimation,e=a.moveUpAnimation;a=o(d("WAWebMediaIncrementalZoom").MediaIncrementalZoomCtx);var f=a.hasOverflownThumbnailSection,g=c("useWAWebPrevious")(f),h=s(!1),i=s(!1),j=a.isEnabled,k=a.msgId,l=n(function(){e==null||e(),h.current=!1},[e]),m=n(function(){b==null||b(),h.current=!0},[b]),q=function(){i.current=!1;return window.setTimeout(function(){i.current=!0},w)};p(function(){var a=q();return function(){window.clearTimeout(a)}},[]);r(function(){i.current=!1;var a=q();h.current&&l();return function(){window.clearTimeout(a)}},[k]);p(function(){if(!j||!i.current||f===g)return;h.current=f;f?m():l()},[a.msgId,f,m,j,b,e,g,l])}g["default"]=b}),226);